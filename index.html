<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéà GrammaKids - D fr ! üéà</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive;
            background: linear-gradient(135deg, #FF6B9D 0%, #C06C84 25%, #6C5B7B 50%, #355C7D 75%, #2A9D8F 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            padding: 15px;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        header {
            background: white;
            border-radius: 30px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            text-align: center;
            animation: bounceIn 1s ease;
            border: 5px solid #FFD93D;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        header h1 {
            color: #FF6B9D;
            font-size: 3.5em;
            text-shadow: 3px 3px 0 #FFD93D;
            margin-bottom: 15px;
        }

        .mascot {
            position: fixed;
            bottom: 30px;
            left: 30px;
            font-size: 5em;
            animation: wave 2s ease-in-out infinite;
            cursor: pointer;
            z-index: 1000;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.3));
        }

        @keyframes wave {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-15deg); }
            75% { transform: rotate(15deg); }
        }

        .menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .menu-card {
            background: white;
            border-radius: 30px;
            padding: 35px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s;
            border: 5px solid;
        }

        .menu-card:nth-child(1) { border-color: #FF6B9D; }
        .menu-card:nth-child(2) { border-color: #FFD93D; }
        .menu-card:nth-child(3) { border-color: #6BCF7F; }
        .menu-card:nth-child(4) { border-color: #4D96FF; }
        .menu-card:nth-child(5) { border-color: #C06C84; }
        .menu-card:nth-child(6) { border-color: #F67280; }

        .menu-card:hover {
            transform: scale(1.08);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        .card-icon {
            font-size: 5em;
            text-align: center;
            margin-bottom: 20px;
        }

        .menu-card h3 {
            color: #2C3E50;
            font-size: 2em;
            text-align: center;
            margin-bottom: 15px;
        }

        .menu-card p {
            color: #555;
            font-size: 1.2em;
            text-align: center;
        }

        .stats {
            text-align: center;
            font-size: 1.1em;
            margin-top: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #FFD93D, #FF6B9D);
            border-radius: 20px;
            color: white;
            font-weight: bold;
        }

        .lesson-container {
            background: white;
            border-radius: 30px;
            padding: 35px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.2);
            display: none;
            border: 5px solid #FFD93D;
        }

        .lesson-container.active {
            display: block;
            animation: slideIn 0.6s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .back-btn {
            background: linear-gradient(135deg, #FF6B9D, #C06C84);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 50px;
            font-size: 1.4em;
            cursor: pointer;
            margin-bottom: 25px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .back-btn:hover {
            transform: scale(1.1);
        }

        .lesson-header {
            text-align: center;
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 5px dashed #FFD93D;
        }

        .lesson-header h2 {
            color: #FF6B9D;
            font-size: 3em;
            text-shadow: 3px 3px 0 #FFD93D;
            margin-bottom: 15px;
        }

        .question-counter {
            text-align: center;
            font-size: 1.5em;
            color: #6C5B7B;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .quiz-question {
            background: white;
            padding: 30px;
            border-radius: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border: 4px solid #4D96FF;
        }

        .quiz-question p {
            font-size: 1.6em;
            color: #2C3E50;
            font-weight: bold;
            margin-bottom: 25px;
            text-align: center;
        }

        .quiz-options {
            display: grid;
            gap: 20px;
        }

        .quiz-option {
            background: linear-gradient(135deg, #F0F8FF, #FFF);
            padding: 25px;
            border-radius: 20px;
            border: 4px solid #E0E0E0;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.4em;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .option-emoji {
            font-size: 2.5em;
            min-width: 60px;
            text-align: center;
        }

        .quiz-option:hover {
            transform: scale(1.05) translateX(10px);
            border-color: #4D96FF;
        }

        .quiz-option.correct {
            background: linear-gradient(135deg, #6BCF7F, #4CAF50);
            color: white;
            border-color: #4CAF50;
            animation: correctPulse 0.6s ease;
        }

        .quiz-option.wrong {
            background: linear-gradient(135deg, #FF6B9D, #E91E63);
            color: white;
            border-color: #E91E63;
            animation: shake 0.5s ease;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-15px); }
            75% { transform: translateX(15px); }
        }

        .next-btn {
            background: linear-gradient(135deg, #6BCF7F, #4CAF50);
            color: white;
            border: none;
            padding: 18px 50px;
            border-radius: 50px;
            font-size: 1.5em;
            cursor: pointer;
            display: none;
            margin: 30px auto;
            font-weight: bold;
            transition: all 0.3s;
        }

        .next-btn:hover {
            transform: scale(1.1);
        }

        .score-display {
            background: linear-gradient(135deg, #FF6B9D, #FFD93D, #6BCF7F);
            color: white;
            text-align: center;
            font-size: 2.5em;
            padding: 40px;
            border-radius: 30px;
            margin-top: 35px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            border: 6px solid white;
        }

        .restart-btn {
            background: linear-gradient(135deg, #4D96FF, #2A7DE1);
            color: white;
            border: none;
            padding: 18px 50px;
            border-radius: 50px;
            font-size: 1.5em;
            cursor: pointer;
            margin-top: 20px;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            header h1 { font-size: 2.5em; }
            .menu { grid-template-columns: 1fr; }
            .mascot { font-size: 3em; }
        }
    </style>
</head>
<body>
    <div class="mascot" onclick="showEncouragement()">ü¶ä</div>

    <div class="container">
        <header>
            <h1>üéà GrammaKids üéà</h1>
            <p>üé® Dÿ±Ÿàÿ≥ ÿ∫Ÿäÿ± ŸÖÿ≠ÿØŸàÿØÿ© ŸÅŸä ÿßŸÑŸÇŸàÿßÿπÿØ ÿßŸÑŸÅÿ±ŸÜÿ≥Ÿäÿ© ! üöÄ</p>
        </header>

        <div class="menu" id="mainMenu">
            <div class="menu-card" onclick="startLesson('noms')">
                <div class="card-icon">üì¶</div>
                <h3>Les Noms</h3>
                <p>Questions illimit√©es sur les noms</p>
                <div class="stats">
                    ‚úÖ <span id="total-noms">0</span> bonnes r√©ponses<br>
                    üìä Pr√©cision: <span id="accuracy-noms">0</span>%
                </div>
            </div>

            <div class="menu-card" onclick="startLesson('verbes')">
                <div class="card-icon">üèÉ</div>
                <h3>Les Verbes</h3>
                <p>Questions illimit√©es sur les verbes</p>
                <div class="stats">
                    ‚úÖ <span id="total-verbes">0</span> bonnes r√©ponses<br>
                    üìä Pr√©cision: <span id="accuracy-verbes">0</span>%
                </div>
            </div>

            <div class="menu-card" onclick="startLesson('adjectifs')">
                <div class="card-icon">üé®</div>
                <h3>Les Adjectifs</h3>
                <p>Questions illimit√©es sur les adjectifs</p>
                <div class="stats">
                    ‚úÖ <span id="total-adjectifs">0</span> bonnes r√©ponses<br>
                    üìä Pr√©cision: <span id="accuracy-adjectifs">0</span>%
                </div>
            </div>

            <div class="menu-card" onclick="startLesson('phrases')">
                <div class="card-icon">‚úèÔ∏è</div>
                <h3>Les Phrases</h3>
                <p>Questions illimit√©es sur les phrases</p>
                <div class="stats">
                    ‚úÖ <span id="total-phrases">0</span> bonnes r√©ponses<br>
                    üìä Pr√©cision: <span id="accuracy-phrases">0</span>%
                </div>
            </div>

            <div class="menu-card" onclick="startLesson('pronoms')">
                <div class="card-icon">üë•</div>
                <h3>Les Pronoms</h3>
                <p>Questions illimit√©es sur les pronoms</p>
                <div class="stats">
                    ‚úÖ <span id="total-pronoms">0</span> bonnes r√©ponses<br>
                    üìä Pr√©cision: <span id="accuracy-pronoms">0</span>%
                </div>
            </div>

            <div class="menu-card" onclick="startLesson('temps')">
                <div class="card-icon">‚è∞</div>
                <h3>Les Temps</h3>
                <p>Questions illimit√©es sur les temps</p>
                <div class="stats">
                    ‚úÖ <span id="total-temps">0</span> bonnes r√©ponses<br>
                    üìä Pr√©cision: <span id="accuracy-temps">0</span>%
                </div>
            </div>
        </div>

        <div class="lesson-container" id="lesson-container">
            <button class="back-btn" onclick="backToMenu()">üëà Retour au menu</button>
            <div class="lesson-header">
                <h2 id="lesson-title"></h2>
                <p id="lesson-subtitle"></p>
            </div>
            <div class="question-counter" id="question-counter">Question 1</div>
            <div id="quiz-area"></div>
            <button class="next-btn" id="next-btn" onclick="nextQuestion()">Question suivante ‚û°Ô∏è</button>
            <div class="score-display" id="score-display" style="display:none;">
                <p id="score-text"></p>
                <button class="restart-btn" onclick="restartLesson()">Continuer üîÑ</button>
                <button class="restart-btn" onclick="backToMenu()">Menu Principal üè†</button>
            </div>
        </div>
    </div>

    <script>
        // ÿ®ŸÜŸÉ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ÿßŸÑÿ∂ÿÆŸÖ
        const questionBanks = {
            noms: [
                {q: "Quel mot est un nom ?", options: ["courir", "chien", "beau"], emojis: ["‚ùå", "üêï", "‚ú®"], correct: 1},
                {q: "Lequel est un nom propre ?", options: ["table", "Paris", "voiture"], emojis: ["ü™ë", "üóº", "üöó"], correct: 1},
                {q: "Trouve le nom : 'Le chat mange'", options: ["Le", "chat", "mange"], emojis: ["üìå", "üê±", "üçΩÔ∏è"], correct: 1},
                {q: "Quel est le nom commun ?", options: ["Ahmed", "ville", "France"], emojis: ["üë¶", "üèôÔ∏è", "üá´üá∑"], correct: 1},
                {q: "Identifie le nom propre :", options: ["enfant", "Alger", "maison"], emojis: ["üë∂", "üåÜ", "üè†"], correct: 1},
                {q: "Quel mot d√©signe une chose ?", options: ["joli", "livre", "dormir"], emojis: ["‚ú®", "üìö", "üò¥"], correct: 1},
                {q: "Trouve le nom : 'Marie court vite'", options: ["Marie", "court", "vite"], emojis: ["üëß", "üèÉ", "‚ö°"], correct: 0},
                {q: "Nom d'animal ?", options: ["manger", "oiseau", "grand"], emojis: ["üçΩÔ∏è", "ü¶Ö", "üìè"], correct: 1},
                {q: "Nom commun dans cette liste ?", options: ["Karim", "pays", "Alg√©rie"], emojis: ["üë®", "üåç", "üá©üáø"], correct: 1},
                {q: "Le mot qui nomme une personne ?", options: ["courir", "professeur", "content"], emojis: ["üèÉ", "üë®‚Äçüè´", "üòä"], correct: 1},
                {q: "Nom d'objet ?", options: ["petit", "ballon", "sauter"], emojis: ["üìè", "‚öΩ", "ü§∏"], correct: 1},
                {q: "Quelle ville (nom propre) ?", options: ["rue", "Lyon", "b√¢timent"], emojis: ["üõ£Ô∏è", "üèôÔ∏è", "üè¢"], correct: 1},
                {q: "Identifie le nom :", options: ["rapidement", "fleur", "manger"], emojis: ["‚ö°", "üå∏", "üç¥"], correct: 1},
                {q: "Nom d'une id√©e ?", options: ["bonheur", "rouge", "danser"], emojis: ["üòä", "üî¥", "üíÉ"], correct: 0},
                {q: "Le nom dans 'Un grand arbre' ?", options: ["Un", "grand", "arbre"], emojis: ["1Ô∏è‚É£", "üìè", "üå≥"], correct: 2},
            ],
            verbes: [
                {q: "Quel mot est un verbe ?", options: ["maison", "dormir", "joli"], emojis: ["üè†", "üò¥", "‚ú®"], correct: 1},
                {q: "Dans 'Marie joue', le verbe ?", options: ["Marie", "joue", "ballon"], emojis: ["üëß", "‚öΩ", "üéÆ"], correct: 1},
                {q: "Verbe √† l'infinitif ?", options: ["mange", "manger", "manges"], emojis: ["üçΩÔ∏è", "üç¥", "üë•"], correct: 1},
                {q: "Trouve le verbe : 'Il court vite'", options: ["Il", "court", "vite"], emojis: ["üë¶", "üèÉ", "‚ö°"], correct: 1},
                {q: "Quelle action ?", options: ["rouge", "sauter", "petit"], emojis: ["üî¥", "ü§∏", "üìè"], correct: 1},
                {q: "Verbe dans 'Tu parles fran√ßais' ?", options: ["Tu", "parles", "fran√ßais"], emojis: ["üë§", "üó£Ô∏è", "üá´üá∑"], correct: 1},
                {q: "L'infinitif du verbe ?", options: ["√©crit", "√©crire", "√©crivons"], emojis: ["‚úçÔ∏è", "üìù", "üë•"], correct: 1},
                {q: "Quelle est l'action ?", options: ["table", "danser", "bleu"], emojis: ["ü™ë", "üíÉ", "üîµ"], correct: 1},
                {q: "Le verbe : 'Nous aimons lire'", options: ["Nous", "aimons", "lire"], emojis: ["üë•", "‚ù§Ô∏è", "üìñ"], correct: 1},
                {q: "Verbe d'√©tat ?", options: ["courir", "√™tre", "voir"], emojis: ["üèÉ", "üßç", "üëÄ"], correct: 1},
                {q: "Trouve le verbe conjugu√© :", options: ["chanter", "chante", "chantons"], emojis: ["üéµ", "üé§", "üë•"], correct: 1},
                {q: "Action dans 'Elle dessine' ?", options: ["Elle", "dessine", "bien"], emojis: ["üëß", "üé®", "üëç"], correct: 1},
                {q: "Quel verbe de mouvement ?", options: ["penser", "nager", "r√™ver"], emojis: ["üí≠", "üèä", "üí§"], correct: 1},
                {q: "Infinitif correct ?", options: ["finis", "finir", "finissons"], emojis: ["‚úÖ", "üèÅ", "üë•"], correct: 1},
                {q: "Le verbe : 'Vous lisez un livre'", options: ["Vous", "lisez", "livre"], emojis: ["üë•", "üìñ", "üìö"], correct: 1},
            ],
            adjectifs: [
                {q: "Quel mot est un adjectif ?", options: ["courir", "arbre", "joyeux"], emojis: ["üèÉ", "üå≥", "üòä"], correct: 2},
                {q: "Dans 'La jolie maison', l'adjectif ?", options: ["La", "jolie", "maison"], emojis: ["üìå", "‚ú®", "üè†"], correct: 1},
                {q: "Accord correct : 'Une fille...'", options: ["fort", "forte", "forts"], emojis: ["üí™", "üëß", "üë¶üë¶"], correct: 1},
                {q: "Adjectif de couleur ?", options: ["manger", "rouge", "table"], emojis: ["üçΩÔ∏è", "üî¥", "ü™ë"], correct: 1},
                {q: "D√©crit la taille :", options: ["petit", "courir", "maison"], emojis: ["üìè", "üèÉ", "üè†"], correct: 0},
                {q: "Dans 'Un grand chien' ?", options: ["Un", "grand", "chien"], emojis: ["1Ô∏è‚É£", "üìè", "üêï"], correct: 1},
                {q: "Adjectif au pluriel : 'Des fleurs...'", options: ["belle", "belles", "beaux"], emojis: ["üå∏", "üíê", "üå∫"], correct: 1},
                {q: "D√©crit l'humeur :", options: ["vite", "content", "hier"], emojis: ["‚ö°", "üòä", "üìÖ"], correct: 1},
                {q: "Accord : 'Des gar√ßons...'", options: ["gentil", "gentille", "gentils"], emojis: ["üë¶", "üëß", "üë¶üë¶"], correct: 2},
                {q: "L'adjectif : 'Une voiture rapide'", options: ["Une", "voiture", "rapide"], emojis: ["1Ô∏è‚É£", "üöó", "‚ö°"], correct: 2},
                {q: "Qualit√© physique ?", options: ["dormir", "doux", "demain"], emojis: ["üò¥", "üß∏", "üìÖ"], correct: 1},
                {q: "Dans 'Les belles fleurs' ?", options: ["Les", "belles", "fleurs"], emojis: ["üìå", "‚ú®", "üå∏"], correct: 1},
                {q: "Adjectif de forme :", options: ["rond", "courir", "maison"], emojis: ["‚≠ï", "üèÉ", "üè†"], correct: 0},
                {q: "Accord f√©minin : 'Une histoire...'", options: ["long", "longue", "longs"], emojis: ["üìè", "üìñ", "üìö"], correct: 1},
                {q: "D√©crit la temp√©rature :", options: ["hier", "chaud", "vite"], emojis: ["üìÖ", "üî•", "‚ö°"], correct: 1},
            ],
            phrases: [
                {q: "Phrase correcte ?", options: ["chien le court", "Le chien court.", "court chien"], emojis: ["‚ùå", "‚úÖ", "‚ùå"], correct: 1},
                {q: "Type : 'Ferme la porte.' ?", options: ["interrogative", "exclamative", "imp√©rative"], emojis: ["‚ùì", "‚ùó", "üëâ"], correct: 2},
                {q: "Ponctuation : 'Tu viens...'", options: ["!", "?", "."], emojis: ["‚ùó", "‚ùì", "‚èπÔ∏è"], correct: 1},
                {q: "Phrase interrogative ?", options: ["Il part.", "Part-il ?", "Pars !"], emojis: ["‚èπÔ∏è", "‚ùì", "‚ùó"], correct: 1},
                {q: "D√©but de phrase correct :", options: ["le chat", "Le chat", "LE CHAT"], emojis: ["‚ùå", "‚úÖ", "‚ùå"], correct: 1},
                {q: "Phrase exclamative ?", options: ["Tu es l√†.", "Es-tu l√† ?", "Que c'est beau !"], emojis: ["‚èπÔ∏è", "‚ùì", "‚ùó"], correct: 2},
                {q: "Ponctuation finale : 'Quelle heure est-il'", options: [".", "!", "?"], emojis: ["‚èπÔ∏è", "‚ùó", "‚ùì"], correct: 2},
                {q: "Structure correcte ?", options: ["Mange il pain", "Il mange du pain", "pain mange il"], emojis: ["‚ùå", "‚úÖ", "‚ùå"], correct: 1},
                {q: "Type de phrase : 'Viens ici !'", options: ["d√©clarative", "imp√©rative", "interrogative"], emojis: ["‚èπÔ∏è", "üëâ", "‚ùì"], correct: 1},
                {q: "Ordre correct des mots ?", options: ["joue Marie", "Marie joue", "joue Marie joue"], emojis: ["‚ùå", "‚úÖ", "‚ùå"], correct: 1},
                {q: "Phrase compl√®te ?", options: ["Le chien.", "Le chien court.", "chien court"], emojis: ["‚ùå", "‚úÖ", "‚ùå"], correct: 1},
                {q: "N√©gation correcte ?", options: ["Il pas dort", "Il ne dort pas", "pas il dort"], emojis: ["‚ùå", "‚úÖ", "‚ùå"], correct: 1},
                {q: "Question bien form√©e ?", options: ["Manges tu ?", "Tu manges ?", "Manges-tu ?"], emojis: ["‚ùå", "‚ùì", "‚úÖ"], correct: 2},
                {q: "Majuscule n√©cessaire ?", options: ["au d√©but", "au milieu", "partout"], emojis: ["‚úÖ", "‚ùå", "‚ùå"], correct: 0},
                {q: "Fin de phrase d√©clarative :", options: ["?", "!", "."], emojis: ["‚ùì", "‚ùó", "‚èπÔ∏è"], correct: 2},
            ],
            pronoms: [
                {q: "Remplacer 'Sophie' ?", options: ["il", "elle", "ils"], emojis: ["üë¶", "üëß", "üë¶üë¶"], correct: 1},
                {q: "'Mes amis et moi' = ?", options: ["nous", "vous", "ils"], emojis: ["üë•", "ü´µ", "üë¶üë¶"], correct: 0},
                {q: "'Les filles jouent' = ?", options: ["ils jouent", "elles jouent", "nous jouons"], emojis: ["üë¶üë¶", "üëßüëß", "üë•"], correct: 1},
                {q: "Pronom singulier 1√®re personne ?", options: ["tu", "je", "il"], emojis: ["ü´µ", "üë§", "üë¶"], correct: 1},
                {q: "Remplacer 'Le gar√ßon' ?", options: ["elle", "il", "nous"], emojis: ["üëß", "üë¶", "üë•"], correct: 1},
                {q: "Pronom pluriel : 'Toi et moi' ?", options: ["ils", "vous", "nous"], emojis: ["üë¶üë¶", "ü´µ", "üë•"], correct: 2},
                {q: "'Les enfants' au f√©minin ?", options: ["ils", "elles", "vous"], emojis: ["üë¶üë¶", "üëßüëß", "ü´µ"], correct: 1},
                {q: "Pronom de politesse ?", options: ["tu", "vous", "il"], emojis: ["üë§", "ü´µ", "üë¶"], correct: 1},
                {q: "Remplacer 'Ahmed et Karim' ?", options: ["il", "elle", "ils"], emojis: ["üë¶", "üëß", "üë¶üë¶"], correct: 2},
                {q: "'La femme' = ?", options: ["il", "elle", "ils"], emojis: ["üë¶", "üë©", "üë¶üë¶"], correct: 1},
                {q: "Pronom 2√®me personne singulier ?", options: ["je", "tu", "il"], emojis: ["üë§", "ü´µ", "üë¶"], correct: 1},
                {q: "'Marie et Sophie' = ?", options: ["ils", "elles", "nous"], emojis: ["üë¶üë¶", "üëßüëß", "üë•"], correct: 1},
                {q: "Qui parle ? (pronom)", options: ["tu", "je", "il"], emojis: ["ü´µ", "üó£Ô∏è", "üë¶"], correct: 1},
                {q: "'Le professeur' masculin ?", options: ["il", "elle", "ils"], emojis: ["üë®‚Äçüè´", "üë©‚Äçüè´", "üë•"], correct: 0},
                {q: "'Vous et moi' = ?", options: ["vous", "nous", "ils"], emojis: ["ü´µ", "üë•", "üë¶üë¶"], correct: 1},
            ],
            temps: [
                {q: "'Je mangerai' = quel temps ?", options: ["pass√©", "pr√©sent", "futur"], emojis: ["‚èÆÔ∏è", "‚èØÔ∏è", "‚è≠Ô∏è"], correct: 2},
                {q: "'Hier, il a jou√©' = ?", options: ["pass√©", "pr√©sent", "futur"], emojis: ["‚èÆÔ∏è", "‚èØÔ∏è", "‚è≠Ô∏è"], correct: 0},
                {q: "'Maintenant, tu cours' = ?", options: ["pass√©", "pr√©sent", "futur"], emojis: ["‚èÆÔ∏è", "‚èØÔ∏è", "‚è≠Ô∏è"], correct: 1},
                {q: "Indicateur de futur ?", options: ["hier", "maintenant", "demain"], emojis: ["üìÖ", "‚è∞", "üîÆ"], correct: 2},
                {q: "'J'ai mang√©' = ?", options: ["pr√©sent", "pass√©", "futur"], emojis: ["‚èØÔ∏è", "‚èÆÔ∏è", "‚è≠Ô∏è"], correct: 1},
                {q: "Temps de 'Je mange' ?", options: ["pass√©", "pr√©sent", "futur"], emojis: ["‚èÆÔ∏è", "‚èØÔ∏è", "‚è≠Ô∏è"], correct: 1},
                {q: "Indicateur de pass√© ?", options: ["bient√¥t", "autrefois", "aujourd'hui"], emojis: ["üîÆ", "üìú", "‚è∞"], correct: 1},
                {q: "'Nous partirons' = ?", options: ["pass√©", "pr√©sent", "futur"], emojis: ["‚èÆÔ∏è", "‚èØÔ∏è", "‚è≠Ô∏è"], correct: 2},
                {q: "Temps de 'Il jouait' ?", options: ["pr√©sent", "pass√©", "futur"], emojis: ["‚èØÔ∏è", "‚èÆÔ∏è", "‚è≠Ô∏è"], correct: 1},
                {q: "Mot de temps pr√©sent ?", options: ["hier", "maintenant", "demain"], emojis: ["üìÖ", "‚è∞", "üîÆ"], correct: 1},
                {q: "'Tu dormiras' = ?", options: ["pass√©", "pr√©sent", "futur"], emojis: ["‚èÆÔ∏è", "‚èØÔ∏è", "‚è≠Ô∏è"], correct: 2},
                {q: "'Avant, je courais' = ?", options: ["pr√©sent", "pass√©", "futur"], emojis: ["‚èØÔ∏è", "‚èÆÔ∏è", "‚è≠Ô∏è"], correct: 1},
                {q: "Futur simple : 'je...'", options: ["mange", "mangerai", "ai mang√©"], emojis: ["‚èØÔ∏è", "‚è≠Ô∏è", "‚èÆÔ∏è"], correct: 1},
                {q: "Indicateur futur ?", options: ["hier soir", "plus tard", "actuellement"], emojis: ["üìÖ", "üîÆ", "‚è∞"], correct: 1},
                {q: "'Elles dansent' = ?", options: ["pass√©", "pr√©sent", "futur"], emojis: ["‚èÆÔ∏è", "‚èØÔ∏è", "‚è≠Ô∏è"], correct: 1},
            ]
        };

        let currentLesson = '';
        let currentQuestionIndex = 0;
        let currentScore = 0;
        let totalAttempts = 0;
        let sessionQuestions = [];

        // ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿπÿßŸÖÿ©
        const stats = {
            noms: {correct: 0, total: 0},
            verbes: {correct: 0, total: 0},
            adjectifs: {correct: 0, total: 0},
            phrases: {correct: 0, total: 0},
            pronoms: {correct: 0, total: 0},
            temps: {correct: 0, total: 0}
        };

        function startLesson(lessonId) {
            currentLesson = lessonId;
            currentQuestionIndex = 0;
            currentScore = 0;
            totalAttempts = 0;

            // ÿÆŸÑÿ∑ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ©
            sessionQuestions = shuffleArray([...questionBanks[lessonId]]);

            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('lesson-container').classList.add('active');

            const titles = {
                noms: {title: "üì¶ Les Noms", sub: "Questions illimit√©es !"},
                verbes: {title: "üèÉ Les Verbes", sub: "Questions illimit√©es !"},
                adjectifs: {title: "üé® Les Adjectifs", sub: "Questions illimit√©es !"},
                phrases: {title: "‚úèÔ∏è Les Phrases", sub: "Questions illimit√©es !"},
                pronoms: {title: "üë• Les Pronoms", sub: "Questions illimit√©es !"},
                temps: {title: "‚è∞ Les Temps", sub: "Questions illimit√©es !"}
            };

            document.getElementById('lesson-title').textContent = titles[lessonId].title;
            document.getElementById('lesson-subtitle').textContent = titles[lessonId].sub;

            loadQuestion();
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function loadQuestion() {
            // ÿ•ÿ∞ÿß ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ©ÿå ÿ•ÿπÿßÿØÿ© ÿÆŸÑÿ∑Ÿáÿß
            if (currentQuestionIndex >= sessionQuestions.length) {
                sessionQuestions = shuffleArray([...questionBanks[currentLesson]]);
                currentQuestionIndex = 0;
            }

            const question = sessionQuestions[currentQuestionIndex];
            const quizArea = document.getElementById('quiz-area');
            document.getElementById('question-counter').textContent = 
                `Question ${totalAttempts + 1} ‚Ä¢ Score: ${currentScore}/${totalAttempts}`;

            quizArea.innerHTML = `
                <div class="quiz-question">
                    <p>üéØ ${question.q}</p>
                    <div class="quiz-options">
                        ${question.options.map((opt, i) => `
                            <div class="quiz-option" onclick="checkAnswer(${i}, ${question.correct})">
                                <span class="option-emoji">${question.emojis[i]}</span>
                                <span>${opt}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('score-display').style.display = 'none';
        }

        function checkAnswer(selected, correct) {
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(opt => opt.style.pointerEvents = 'none');

            totalAttempts++;
            stats[currentLesson].total++;

            if (selected === correct) {
                options[selected].classList.add('correct');
                currentScore++;
                stats[currentLesson].correct++;
                createConfetti();
            } else {
                options[selected].classList.add('wrong');
                setTimeout(() => options[correct].classList.add('correct'), 300);
            }

            updateStats();
            document.getElementById('next-btn').style.display = 'block';
        }

        function nextQuestion() {
            currentQuestionIndex++;
            loadQuestion();
        }

        function restartLesson() {
            currentQuestionIndex = 0;
            sessionQuestions = shuffleArray([...questionBanks[currentLesson]]);
            loadQuestion();
        }

        function backToMenu() {
            document.getElementById('lesson-container').classList.remove('active');
            document.getElementById('mainMenu').style.display = 'grid';
            updateStats();
        }

        function updateStats() {
            Object.keys(stats).forEach(lesson => {
                const accuracy = stats[lesson].total > 0 
                    ? Math.round((stats[lesson].correct / stats[lesson].total) * 100) 
                    : 0;
                document.getElementById(`total-${lesson}`).textContent = stats[lesson].correct;
                document.getElementById(`accuracy-${lesson}`).textContent = accuracy;
            });

            // ÿ≠ŸÅÿ∏ ŸÅŸä localStorage
            localStorage.setItem('grammaKidsStats', JSON.stringify(stats));
        }

        function createConfetti() {
            const colors = ['#FF6B9D', '#FFD93D', '#6BCF7F', '#4D96FF'];
            for (let i = 0; i < 30; i++) {
                const confetti = document.createElement('div');
                confetti.style.cssText = `
                    position: fixed;
                    width: 10px;
                    height: 10px;
                    background: ${colors[Math.floor(Math.random() * colors.length)]};
                    left: ${Math.random() * 100}%;
                    top: -20px;
                    animation: fall 3s linear;
                    border-radius: 50%;
                    z-index: 9999;
                `;
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 3000);
            }
        }

        function showEncouragement() {
            const messages = ['üéâ Bravo !', '‚≠ê Super !', 'üåü Excellent !', 'üí™ Continue !'];
            alert(messages[Math.floor(Math.random() * messages.length)]);
        }

        // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿπŸÜÿØ ÿßŸÑÿ®ÿØÿßŸäÿ©
        const savedStats = localStorage.getItem('grammaKidsStats');
        if (savedStats) {
            Object.assign(stats, JSON.parse(savedStats));
            updateStats();
        }

        // CSS animation
        const style = document.createElement('style');
        style.textContent = '@keyframes fall { to { transform: translateY(100vh) rotate(360deg); opacity: 0; } }';
        document.head.appendChild(style);
    </script>
</body>
</html>
